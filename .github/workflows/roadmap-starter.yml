# Simple Roadmap Starter Workflow
# Basic integration for projects just getting started with roadmap

name: ğŸŒ± Roadmap Starter

on:
  push:
    branches: [ main, master ]
  pull_request:
    branches: [ main, master ]

jobs:
  roadmap-basics:
    runs-on: ubuntu-latest
    name: ğŸ—ºï¸ Basic Roadmap Integration

    steps:
    - name: ğŸ“¥ Checkout Repository
      uses: actions/checkout@v4

    - name: ğŸ Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: ğŸ“¦ Install Roadmap CLI
      run: |
        pip install --upgrade pip
        # TODO: Replace with actual PyPI package when published
        pip install roadmap-cli

    - name: ğŸ¯ Track Recent Changes
      run: |
        echo "ğŸ” Scanning for roadmap-related changes..."

        # Initialize roadmap if needed
        if [ ! -f ".roadmap/config.yaml" ]; then
          echo "ğŸš€ First time setup - initializing roadmap..."
          roadmap init --name "${{ github.repository }}" --auto-confirm
        fi

        # Track recent commits
        roadmap ci scan-repository --max-commits 5

        # Show current status
        echo "ğŸ“Š Current roadmap status:"
        roadmap status

    - name: âœ… Validate Setup
      run: |
        echo "âœ… Roadmap integration validated!"
        echo "ğŸ‰ Your project is now integrated with roadmap tracking."
        echo ""
        echo "ğŸ’¡ Next steps:"
        echo "  - Use issue IDs in branch names: feature/12345678-new-feature"
        echo "  - Add progress markers: git commit -m 'Fix bug [progress:50%]'"
        echo "  - Mark completion: git commit -m 'Done [closes roadmap:12345678]'"
        echo ""
        echo "ğŸ“š Learn more: https://github.com/roadmap-cli/roadmap"
